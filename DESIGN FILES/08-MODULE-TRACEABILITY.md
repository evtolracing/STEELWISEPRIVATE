# 08 - TRACEABILITY & CHAIN OF CUSTODY MODULE

## Module Overview
Full genealogy tracking from heat origin through all transformations to end-user delivery.

---

## FUNCTIONAL REQUIREMENTS

| ID | Requirement | Priority |
|----|-------------|----------|
| TR-01 | Maintain parent-child relationships through processing | Critical |
| TR-02 | Visualize material genealogy tree | Critical |
| TR-03 | Forward/backward traceability queries | Critical |
| TR-04 | Link all documents (MTR, BOL, POD) to material | High |
| TR-05 | Support recall/quality containment scenarios | High |
| TR-06 | Immutable audit trail of all changes | High |
| TR-07 | Export traceability reports for compliance | High |

---

## SCREEN: Traceability Search

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TRACEABILITY SEARCH                                              [Export]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Search By: â—‹ Heat#  â— Coil#  â—‹ PO#  â—‹ Customer  â—‹ Date Range              â”‚
â”‚                                                                             â”‚
â”‚ Coil Number: [HRC-45221-01        ]                           [ğŸ” Search]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ RESULT: Coil HRC-45221-01                                                   â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ ORIGIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Heat: H89421 â”‚ Mill: ArcelorMittal â”‚ Cast: 01/02/2026 â”‚ Grade: A36    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ CURRENT STATUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Coil: HRC-45221-01 â”‚ 12.000" x 0.075" â”‚ 10,450 lbs â”‚ WH-B Bay 5       â”‚  â”‚
â”‚ â”‚ Status: Shipped â”‚ Customer: ABC Manufacturing â”‚ SO: SO-10245          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚ TABS: [Genealogy Tree] [Timeline] [Documents] [Related Orders]             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SCREEN: Genealogy Tree View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENEALOGY: Heat H89421                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  HEAT: H89421                                                               â”‚
â”‚  Mill: ArcelorMittal Burns Harbor                                           â”‚
â”‚  Cast Date: 01/02/2026                                                      â”‚
â”‚  Grade: A36 | Total Weight: 245,000 lbs                                     â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€â”€ COIL: HRC-45221 (Master)                                              â”‚
â”‚  â”‚    0.075" x 48" | 42,500 lbs                                             â”‚
â”‚  â”‚    Received: 01/16/2026 | PO: PO-10892                                   â”‚
â”‚  â”‚    â”‚                                                                     â”‚
â”‚  â”‚    â”œâ”€â”€â”€ COIL: HRC-45221-01  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º SHIPPED         â”‚
â”‚  â”‚    â”‚    12" x 0.075" | 10,450 lbs                      SO-10245         â”‚
â”‚  â”‚    â”‚    Slit: 01/17/2026 | WO: WO-8856                 ABC Mfg          â”‚
â”‚  â”‚    â”‚                                                                     â”‚
â”‚  â”‚    â”œâ”€â”€â”€ COIL: HRC-45221-02  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º SHIPPED         â”‚
â”‚  â”‚    â”‚    12" x 0.075" | 10,450 lbs                      SO-10245         â”‚
â”‚  â”‚    â”‚    Slit: 01/17/2026 | WO: WO-8856                 ABC Mfg          â”‚
â”‚  â”‚    â”‚                                                                     â”‚
â”‚  â”‚    â”œâ”€â”€â”€ COIL: HRC-45221-03  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º IN STOCK        â”‚
â”‚  â”‚    â”‚    12" x 0.075" | 10,450 lbs                      WH-A Bay 8       â”‚
â”‚  â”‚    â”‚    Slit: 01/17/2026 | WO: WO-8856                 Available        â”‚
â”‚  â”‚    â”‚                                                                     â”‚
â”‚  â”‚    â””â”€â”€â”€ COIL: HRC-45221-04  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º IN STOCK        â”‚
â”‚  â”‚         10.5" x 0.075" | 9,150 lbs                     WH-A Bay 9       â”‚
â”‚  â”‚         Slit: 01/17/2026 | WO: WO-8856                 Available        â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€â”€ COIL: HRC-45198 (Master)                                              â”‚
â”‚  â”‚    0.075" x 48" | 41,200 lbs                                             â”‚
â”‚  â”‚    Status: In Stock | Location: WH-A Bay 14                              â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â””â”€â”€â”€ COIL: HRC-45199 (Master)                                              â”‚
â”‚       0.075" x 48" | 40,800 lbs                                             â”‚
â”‚       Status: Allocated | SO: SO-10289                                      â”‚
â”‚                                                                             â”‚
â”‚  LEGEND: â— Available  â— Allocated  â–º Shipped  â—‹ Consumed  âŠ˜ Hold           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SCREEN: Timeline View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TIMELINE: Coil HRC-45221-01                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  01/02/2026  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  09:00 AM    â”‚ CAST at ArcelorMittal Burns Harbor                          â”‚
â”‚              â”‚ Heat: H89421 | Grade: A36 | 245,000 lbs total               â”‚
â”‚              â”‚ ğŸ“„ MTR-H89421.pdf                                            â”‚
â”‚              â”‚                                                              â”‚
â”‚  01/04/2026  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  14:30 PM    â”‚ SHIPPED from Mill                                            â”‚
â”‚              â”‚ BOL: BOL-445521 | Carrier: XYZ Trucking                      â”‚
â”‚              â”‚ ğŸ“„ BOL-445521.pdf                                            â”‚
â”‚              â”‚                                                              â”‚
â”‚  01/16/2026  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  10:42 AM    â”‚ RECEIVED at Warehouse A                                      â”‚
â”‚              â”‚ PO: PO-10892 | Weight Verified: 42,500 lbs                   â”‚
â”‚              â”‚ Put Away: Bay 12                                             â”‚
â”‚              â”‚                                                              â”‚
â”‚  01/17/2026  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  08:15 AM    â”‚ PROCESSED - Slitting                                         â”‚
â”‚              â”‚ WO: WO-8856 | Input: 42,500 lbs | Yield: 96.9%               â”‚
â”‚              â”‚ Output: 4 coils | Operator: J. Smith                         â”‚
â”‚              â”‚                                                              â”‚
â”‚  01/17/2026  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  11:30 AM    â”‚ SHIPPED to Customer                                          â”‚
â”‚              â”‚ SO: SO-10245 | Customer: ABC Manufacturing                   â”‚
â”‚              â”‚ BOL: BOL-445890 | Weight: 10,450 lbs                         â”‚
â”‚              â”‚ ğŸ“„ BOL-445890.pdf  ğŸ“„ POD-445890.pdf                         â”‚
â”‚              â”‚                                                              â”‚
â”‚  01/17/2026  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  15:45 PM    â”‚ DELIVERED                                                    â”‚
â”‚              â”‚ Signed: M. Johnson | POD Captured                            â”‚
â”‚              â”‚                                                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## RECALL SCENARIO WORKFLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IDENTIFY   â”‚â”€â”€â–¶â”‚    QUERY     â”‚â”€â”€â–¶â”‚   CONTAIN    â”‚â”€â”€â–¶â”‚   EXECUTE    â”‚
â”‚    ISSUE     â”‚   â”‚   AFFECTED   â”‚   â”‚   MATERIAL   â”‚   â”‚   RECALL     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â–¼                  â–¼                  â–¼                  â–¼
  Heat/Lot/Mill      Forward Trace      Place Holds       Notify Customers
  Date Range         Find all children  Stop Shipments    Return Instructions
  Defect Type        Customer List      Block Sales       Document Actions
```

### Containment Query Example
```
INPUT:  Heat H89421 has quality issue
OUTPUT: 
  - 6 coils produced from heat
  - 4 coils still in inventory (HOLD applied)
  - 2 coils shipped to 1 customer
  - Customer contact information
  - BOL/POD documents for shipped material
```

---

## AUDIT TRAIL

Every material event is logged immutably:

```
AUDIT_LOG
â”œâ”€â”€ log_id (PK)
â”œâ”€â”€ timestamp
â”œâ”€â”€ entity_type (COIL, HEAT, ORDER, etc.)
â”œâ”€â”€ entity_id
â”œâ”€â”€ action (CREATE, UPDATE, DELETE, PROCESS, SHIP, etc.)
â”œâ”€â”€ old_values (JSONB)
â”œâ”€â”€ new_values (JSONB)
â”œâ”€â”€ user_id
â”œâ”€â”€ ip_address
â””â”€â”€ session_id
```

---

## API ENDPOINTS

```
GET    /api/v1/trace/heat/{heat_number}           # All material from heat
GET    /api/v1/trace/coil/{coil_id}               # Coil with ancestors
GET    /api/v1/trace/coil/{coil_id}/children      # All descendants
GET    /api/v1/trace/coil/{coil_id}/timeline      # Event timeline
GET    /api/v1/trace/coil/{coil_id}/documents     # All linked docs

GET    /api/v1/trace/forward                       # Forward trace query
GET    /api/v1/trace/backward                      # Backward trace query

POST   /api/v1/trace/recall                        # Initiate recall
GET    /api/v1/trace/recall/{id}/affected          # Affected items
```

---

## COMPLIANCE REPORTS

| Report | Content | Trigger |
|--------|---------|---------|
| Certificate of Compliance | Heat, chemistry, mechanicals, certs | Per shipment |
| Traceability Report | Full chain of custody | Customer request |
| Material Genealogy | Parent-child tree | Audit |
| Recall Summary | All affected material + disposition | Recall event |
